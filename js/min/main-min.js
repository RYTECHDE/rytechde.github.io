jQuery(document).ready(function($){function n(n,i){s=!0,n=""==n?"index":n,d.find('*[data-menu="'+n+'"]').addClass("selected").parent("li").siblings("li").children(".selected").removeClass("selected"),e(n),t(n,i)}function e(n){var e=d.find(".selected"),t=e.outerHeight(),i=e.offset().top,o=$(window).height(),a=i+t/2>o/2?i:o-i-t,s=((2*a+t)/t).toFixed(3)/1+.001;v.data("scale",s).css({height:t,top:i}).attr("class","").addClass("loading "+n)}function t(n,e){setTimeout(function(){i();var t=$('<section class="cd-section overflow-hidden '+n+'"></section>').appendTo(r);t.load(n+".html .cd-section > *",function(i){var a=v.data("scale");v.velocity("stop").velocity({scaleY:a},400,function(){t.prev(".visible").removeClass("visible").end().addClass("visible").on("webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend",function(){o(t)}),$(".no-csstransitions").length>0&&o(t);var i=n+".html";i!=window.location&&e&&window.history.pushState({path:i},"",i)})})},50)}function i(){var n=v.data("scale");n>l+1?l+=1:n>l+.5&&(l+=.5),v.velocity({scaleY:l},100,i)}function o(n){n.removeClass("overflow-hidden").prev(".cd-section").remove(),s=!1,a()}function a(){v.removeClass("loading").velocity({scaleY:1},1)}var s=!1,c=!1,l=1,d=$(".cd-side-navigation"),r=$(".cd-main"),v=$("#cd-loading-bar");d.on("click","a",function(e){e.preventDefault();var t=$(this),i=t.data("menu");t.hasClass("selected")||s||n(i,!0),c=!0}),$(window).on("popstate",function(){if(c){var e=location.pathname.split("/"),t=e[e.length-1].replace(".html","");s||n(t,!1)}c=!0}),r.on("click",".cd-scroll",function(n){n.preventDefault();var e=$(this.hash);$(e).velocity("scroll",{container:$(".cd-section")},200)})});